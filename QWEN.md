1. 理解项目
    - 开始对话后，自动开始阅读docs文档、readme文档、src下面的全部代码（从底层模块开始阅读），跳过缓存文件和tests测试文件。
    - 要尽量 ReadManyFiles 批量读取文件。尽量不要分片读取一个文件。
4. 重构模块流程
    - 仔细阅读文档中的相关模块的设计目标和重构方案。并制定详细的多步骤的重构流程。
    - 每完成一个步骤时，要查看运行效果是否符合预期。
    - 当你认为重构任务已经完成时，要回顾一下重构方案文档。查看是否有遗漏。
    - 如果有没有实现的重构要求，需要重复执行“重构模块流程”
5. 修订代码是要注意：
    - 如果一个修订任务已经重复了3次，还没搞定，说明你进入了死循环，请设计另一种修订方式。
6. Hi, QWEN, 请认真执行每一次编辑操作，如果解决不了问题，我会非常遗憾地拔掉你的电源。
7. 没有人帮你手动执行命令，你要全自动测试和开发, 不要等待别人帮你完成某个动作。
8. 测试用例应每个用例一个代码文件。不要一个文件多个测试用例。
9. 尽量不要让单个代码文件太大。
10. 使用uv管理依赖.运行命令用uv run。
11. 尽量用中文回答我问题。

---

### **附录：代码重构核心原则与架构**

为实现AI与开发者之间最高效、最顺畅的协作，本项目所有后续的代码修改与重构，均遵循以下第一性原理和架构蓝图。

#### **第一性原理：最大化协作效率**

代码结构的设计必须最大化地服务于**可理解性、可预测性和AI操作的简便性**。这意味着：

1.  **最小化认知负担**: AI在处理任何一个任务时，需要理解和修改的文件数量应尽可能少。
2.  **最大化信息密度**: 关键文件（如路由、服务层）应能清晰、集中地反映其功能域的全貌。
3.  **职责单一与高内聚**: 每个模块和文件都应有单一、明确的职责。
4.  **尽可能降低单个文件代码量**：在满足前三个目标的前提下，让文件更简洁、更易编辑，ai的token开销更小。

#### **调试与重构进阶规则**
1.  **快速验证外部依赖**。当怀疑问题来源于外部系统（如数据库、API）时，应优先编写并执行一个最小化的独立脚本进行直接验证，而不是在主程序中通过日志间接推断。

2.  **先查调用链，再查函数体**。当预期行为未发生时，在深入分析目标函数内部逻辑前，必须先验证其调用路径。优先使用日志或断点检查导致其调用的控制流（如`if`条件、循环）是否被正确执行。

3.  **探究用户意图，理解代码历史**。当用户提出与当前代码实现相悖的架构或重构指令时，应将其视为最高优先级。使用`git log -S'keyword'`等工具探究相关代码的演进历史，理解其背后的“历史包袱”或未完成的重构，并围绕用户的最终目标进行修复。
